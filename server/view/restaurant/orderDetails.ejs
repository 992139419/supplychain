
<ul class="add_q" style="font-size: 12px; padding: 0 15px">
<li style="background-color: #F7F7F7;margin: 0 -15px;height: 35PX;line-height: 35px">
    <div class="list_confirm_p07" style="font-size:13px;height: 35px;text-align: left;padding: 0 15px;line-height: 35px">
        订单信息
    </div>
</li>
    <li style="margin-top:5px;height: 22px;line-height: 22px;border: none;font-size: 12px">
        <label class="add_q_q" style = "width:40%;text-align: left;height: 22px;line-height: 22px;font-size: 12px">
            订单编号：
        </label>

        <div class="add_q_w" style = "width: 60%; color: #666666;font-size: 12px">
            <%=order.orderNo%>
        </div>
    </li>

    <li style="margin-top:5px;height: 22px;line-height: 22px;border: none;font-size: 12px">
        <label class="add_q_q" style = "width:40%;text-align: left;height: 22px;line-height: 22px;font-size: 12px">
            订单状态：
        </label>

        <div class="add_q_w" style = "width: 60%; color: #666666;font-size: 12px">

            <%if(order.orderStatus==='P'){%>
                    未下单
            <%}%>
            <%if(order.orderStatus==='N'){%>
                    未发货
            <%}%>
            <%if(order.orderStatus==='S'){%>
                    已发货
            <%}%>
            <%if(order.orderStatus==='R'){%>
                    已签收
            <%}%>

        </div>
    </li>

    <li style="margin-top:5px;height: 22px;line-height: 22px;border: none;font-size: 12px">
        <label class="add_q_q" style = "width:40%;text-align: left;height: 22px;line-height: 22px;font-size: 12px">
            供应商：
        </label>

        <div class="add_q_w" style = "width: 60%; color: #666666;font-size: 12px">
            <%=order.supplyName%>
        </div>
    </li>
    <li style="margin-top:5px;height: 22px;line-height: 22px;border: none;font-size: 12px">
        <label class="add_q_q" style = "width:40%;text-align: left;height: 22px;line-height: 22px;font-size: 12px">
            收货餐厅：
        </label>

        <div class="add_q_w" style = "width: 60%; color: #666666;font-size: 12px">
            <%=order.restruantName%>
        </div>
    </li>

    <li style="height: 22px;line-height: 22px;border: none">
        <label class="add_q_q" style = "width: 40%; color: #666666;font-size: 12px;text-align: left ;height: 22px;line-height: 22px">餐厅联系电话：
        </label>

        <div class="add_q_w" style = "width: 60%; color: #666666;font-size: 12px">
            <%=order.mobile%>
        </div>
    </li>
    <li style="height: 22px;line-height: 22px;border: none">
        <label class="add_q_q" style = "font-size: 12px;width: 40%; color: #666666;text-align: left;height: 22px;line-height: 22px">
            收货地址：
        </label>

        <div class="add_q_w" style = "font-size: 12px;width: 60%; color: #666666;">
            <%=order.receiverAddress%>
        </div>
    </li>
    <%if(order.orderStatus==='R'){%>
    <li style="height: 22px;line-height: 22px;border: none">
        <label class="add_q_q" style = "font-size: 12px;width: 40%; color: #666666;text-align: left;height: 22px;line-height: 22px">
            签收人：
        </label>
        <div class="add_q_w" style = "font-size: 12px;width: 60%; color: #666666;">
            <%=order.receiver%>
        </div>
    </li>
    <%}%>
</ul>
<div class="list_confirm_p07" style="height: 35px;line-height: 35px;margin-top: 5px
">
    <div class="price_offerq">
        <div class="price_offer_w" style="width: 100%;height: 35px;line-height: 35px;float: left;background-color: #F7F7F7;text-align: left;font-size: 14px;color: #212147;padding: 0 15px">商品名称</div>
    </div>
</div>
<ul class="price_list_copy" style="  border-bottom: 1px dashed #979797;
  padding-bottom: 10px;">
    <li style="height: 35px;line-height: 35px;padding-top: 0px">
        <div style="width: 30%;font-size: 13px; height: 35px;line-height: 35px">名称</div>
        <div style="width: 15%; font-size: 13px; height: 35px;line-height: 35px">单价</div>
        <div style="width: 15%; font-size: 13px;height: 35px;line-height: 35px">单位</div>
        <div style="width: 20%; font-size: 13px;height: 35px;line-height: 35px">购买数量</div>
        <%if(order.orderStatus==='R'){%>
        <div style="width: 20%;font-size: 13px;height: 35px;line-height: 35px">实收数量</div>
        <%}%>
    </li>
    <%order.orderItem.forEach(function(material){%>

    <li class="material" style=" color: #666;line-height: 25px;padding-top: 0px;border: none;margin-top: 5px;padding-bottom: 5px;">
        <div style="width: 30%;font-size: 12px; line-height: 15px;"> <%=material.materialName%></div>
        <div class="money" style="width: 15%; font-size: 12px;line-height: 15px"><%=material.materialPrice%></div>
        <div style="width: 15%; font-size: 12px;line-height: 15px"><%=material.unit%></div>
        <div class="num" style="width: 20%; font-size: 12px;line-height: 15px"><%=material.number%></div>

        <%if(order.orderStatus==='R'){%>
        <div class="paidIn" style="width: 20%;font-size: 12px;"><%=material.paidIn?material.paidIn:'0'%></div>
        <%}%>

    </li>
    <%})%>
</ul>
<div style="font-size: 15px; padding: 10px 15px;color: red;border-bottom: 1px dashed #979797;">
    订购总额：￥<span id="sum" class="pricew"> 0</span>
</div>
<%if(order.orderStatus==='R'){%>
<div style="font-size: 15px; padding: 10px 15px;color: red;border-bottom: 1px dashed #979797">
    实收总额：￥<span id="paidInsum" class="paidInsum"> 0</span>
</div>
<%}%>
<div style="height: 55px;width: 100%"></div>
<script>
    if('<%=order.orderStatus%>'==='R') {
        var li = document.querySelectorAll('.material');
        for (var i = 0, size = li.length; i < size; i++) {
            var number = li[i].querySelectorAll('.num')[0].innerText;
            var paidIn = li[i].querySelectorAll('.paidIn')[0].innerText;
            if (number != paidIn) {
                li[i].style.color = 'red';
            }
        }
    }

    var li = document.querySelectorAll(".material")
    var pricew = 0;
    var paidInSum = 0;
    for (var a = 0; a < li.length; a++) {
        var money = li[a].querySelectorAll('.money')[0].innerHTML;
        var materialNumber = li[a].querySelectorAll('.num')[0].innerHTML;
        var price = new Decimal(money).times(new Decimal(materialNumber));
        pricew = new Decimal(pricew).plus(new Decimal(price));
       if(li[a].querySelectorAll('.paidIn').length>0){
           var paidInNumber  =  li[a].querySelectorAll('.paidIn')[0].innerHTML;
           var paidInPrice = new Decimal(money).times(new Decimal(paidInNumber));
           paidInSum = new Decimal(paidInSum).plus(new Decimal(paidInPrice));
       }
    }
    document.querySelectorAll('.pricew')[0].innerHTML = pricew;
    if(document.querySelectorAll('.paidInsum').length>0) {
        document.querySelectorAll('.paidInsum')[0].innerHTML = paidInSum;
    }
</script>
